Module("reference/src-gen/nabl2/collection/analysis/classes",[Imports([ImportWildcard("signatures/nabl2/shared"),ImportWildcard("signatures/nabl2/shared/common"),ImportWildcard("signatures/nabl2/shared/constraints"),ImportWildcard("nabl2/shared"),ImportWildcard("signatures/nabl2/runtime"),ImportWildcard("signatures/nabl2/runtime/analysis"),ImportWildcard("signatures/nabl2/runtime/common"),ImportWildcard("nabl2/runtime"),ImportWildcard("nabl2/runtime/analysis"),ImportWildcard("nabl2/runtime/prelude"),ImportWildcard("nabl2/runtime/stdlib")]),Rules([]),Rules([]),Rules([]),Imports([ImportWildcard("signatures"),ImportWildcard("reference/src-gen/nabl2/collection/analysis")]),Rules([RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term19"),NoAnnoList(Op("Class",[Var("x"),Var("parent"),Var("ff"),Var("mm")]))),Var("args3")])),Var("constraint0"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Seq(Assign(Var("cs"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"cs\"")))),Id))),WithClause(LChoice(Assign(NoAnnoList(Op("Params",[As(Var("params12"),NoAnnoList(Tuple([Var("s")])))])),Var("args3")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s)\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args3")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Class(x, parent, ff, mm)\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term19")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term19")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params12")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint0"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s")]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDecl",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGAssoc",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("I",[])),Var("cs"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Type",[])),NoAnnoList(Op("ClassType",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))]))])),NoAnnoList(Str("\"!\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDecl",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Implicit\""))])),NoAnnoList(Op("This",[])),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("term19"))])),Var("cs"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Implicit\""))])),NoAnnoList(Op("This",[])),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("term19"))])),NoAnnoList(Op("Type",[])),NoAnnoList(Op("ClassType",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))]))])),NoAnnoList(Str("\"!\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDistinct",[NoAnnoList(Op("Projection",[NoAnnoList(Str("\"name\""))])),NoAnnoList(Op("Declarations",[Var("cs"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))]))])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Duplicate field\"")),NoAnnoList(Op("NAME",[]))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDistinct",[NoAnnoList(Op("Projection",[NoAnnoList(Str("\"name\""))])),NoAnnoList(Op("Declarations",[Var("cs"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Method\""))]))])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Duplicate method\"")),NoAnnoList(Op("NAME",[]))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CSubsetEq",[NoAnnoList(Op("Lsect",[NoAnnoList(Op("Declarations",[Var("cs"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))]))])),NoAnnoList(Op("Projection",[NoAnnoList(Str("\"name\""))])),NoAnnoList(Op("Diff",[NoAnnoList(Op("Reachables",[Var("cs"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))]))])),NoAnnoList(Op("NoProjection",[])),NoAnnoList(Op("Declarations",[Var("cs"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))]))]))]))])),NoAnnoList(Op("NoProjection",[])),NoAnnoList(Op("EmptySet",[])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Field hides inherited field\"")),NoAnnoList(Op("NAME",[]))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDirectEdge",[Var("cs"),NoAnnoList(Op("P",[])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CBuildRel",[NoAnnoList(Op("ClassType",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))]))])),NoAnnoList(Op("DefaultRelation",[])),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CInequal",[NoAnnoList(Op("ClassType",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))]))])),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Cannot inherit from self\"")),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))]))])),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[NoAnnoList(Str("\"default\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("parent"),NoAnnoList(Op("ParamsAndType",[NoAnnoList(Tuple([Var("s"),Var("cs")])),Var("ty")]))]))),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-Map2-rule"))],[NoAnnoList(Str("\"Map2\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("ff"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("cs"),Var("x")]))]))]))),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-Map2-rule"))],[NoAnnoList(Str("\"Map2\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("mm"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("cs"),Var("x")]))]))]))),NoAnnoList(Op("CNew",[NoAnnoList(List([Var("cs")])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term19"))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term20"),NoAnnoList(Op("Parent",[Var("x")]))),Var("args4")])),Var("constraint1"),[WithClause(Seq(Assign(Var("ty1"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty1\"")))),Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Seq(Assign(Var("d_parent"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"d_parent\"")))),Id)))),WithClause(LChoice(Assign(NoAnnoList(Op("ParamsAndType",[As(Var("params13"),NoAnnoList(Tuple([Var("s"),Var("cs")]))),Var("type1")])),Var("args4")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s, cs) : type1\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args4")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Parent(x)\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term20")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term20")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params13")),NoAnnoList(Str("\" : \"")),App(CallNoArgs(SVar("pp-NaBL2-objlangterm")),Var("type1")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint1"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CEqual",[Var("type1"),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20")),NoAnnoList(Op("Type",[])),Var("type1")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s"),Var("cs")]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGRef",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGNamedEdge",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("I",[])),Var("cs"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CResolve",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("d_parent"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[Var("d_parent"),NoAnnoList(Op("Type",[])),Var("ty1"),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CInequal",[Var("ty1"),NoAnnoList(Op("MainType",[])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Cannot inherit from main class\"")),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("x"))]))])),NoAnnoList(Op("CEqual",[Var("ty"),NoAnnoList(Op("ClassType",[Var("d_parent")])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term20"))]))]))]))]))]))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term21"),NoAnnoList(Op("None",[]))),Var("args5")])),Var("constraint2"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id)),WithClause(LChoice(Assign(NoAnnoList(Op("ParamsAndType",[As(Var("params14"),NoAnnoList(Tuple([Var("s"),Var("cs")]))),Var("type2")])),Var("args5")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s, cs) : type2\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args5")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"None()\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term21")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term21")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params14")),NoAnnoList(Str("\" : \"")),App(CallNoArgs(SVar("pp-NaBL2-objlangterm")),Var("type2")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint2"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CEqual",[Var("type2"),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term21"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term21")),NoAnnoList(Op("Type",[])),Var("type2")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term21")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s"),Var("cs")]))])),NoAnnoList(Op("CEqual",[Var("ty"),NoAnnoList(Op("ClassType",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),NoAnnoList(Str("\"Object\"")),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("term21"))]))])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term21"))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term22"),NoAnnoList(Op("Field",[Var("c"),Var("x")]))),Var("args6")])),Var("constraint3"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id)),WithClause(LChoice(Assign(NoAnnoList(Op("Params",[As(Var("params15"),NoAnnoList(Tuple([Var("s"),Var("cname")])))])),Var("args6")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s, cname)\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args6")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Field(c, x)\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term22")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term22")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params15")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint3"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term22")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s"),Var("cname")]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDecl",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term22"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Type",[])),Var("ty"),NoAnnoList(Str("\"!\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term22"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Property",[NoAnnoList(Str("\"origin\""))])),NoAnnoList(Op("Field",[])),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term22"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Property",[NoAnnoList(Str("\"cname\""))])),Var("cname"),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term22"))]))])),App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[NoAnnoList(Str("\"default\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("c"),NoAnnoList(Op("ParamsAndType",[NoAnnoList(Tuple([Var("s")])),Var("ty")]))])))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term23"),NoAnnoList(Op("Method",[Var("c"),Var("x"),Var("aa"),Var("vv"),Var("ss"),Var("e")]))),Var("args7")])),Var("constraint4"),[WithClause(Seq(Assign(Var("s'"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"s'\"")))),Seq(Assign(Var("d_m"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"d_m\"")))),Seq(Assign(Var("cty'"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"cty'\"")))),Seq(Assign(Var("aaty'"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"aaty'\"")))),Seq(Assign(Var("aaty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"aaty\"")))),Seq(Assign(Var("ety"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ety\"")))),Seq(Assign(Var("cty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"cty\"")))),Seq(Assign(Var("as"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"as\"")))),Seq(Assign(Var("ms"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ms\"")))),Id)))))))))),WithClause(LChoice(Assign(NoAnnoList(Op("Params",[As(Var("params16"),NoAnnoList(Tuple([Var("s"),Var("cname")])))])),Var("args7")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s, cname)\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args7")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Method(c, x, aa, vv, ss, e)\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term23")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term23")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params16")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint4"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s"),Var("cname")]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDecl",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Method\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Method\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Type",[])),NoAnnoList(Op("MethodType",[Var("cty"),Var("aaty")])),NoAnnoList(Str("\"!\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Method\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Property",[NoAnnoList(Str("\"cname\""))])),Var("cname"),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CNew",[NoAnnoList(List([Var("s'")])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGRef",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Method\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s'"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDirectEdge",[Var("s'"),NoAnnoList(Op("I",[])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDirectEdge",[Var("s'"),NoAnnoList(Op("Label",[NoAnnoList(Str("\"S\""))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CResolve",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Method\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("d_m"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[Var("d_m"),NoAnnoList(Op("Type",[])),NoAnnoList(Op("MethodType",[Var("cty'"),Var("aaty'")])),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CCheckRel",[Var("cty"),NoAnnoList(Op("DefaultRelation",[])),Var("cty'"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Erroneous overriding\"")),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("x"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CCheckRel",[Var("aaty'"),NoAnnoList(Op("DefaultRelation",[])),Var("aaty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Overloading\"")),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("x"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CCheckRel",[Var("aaty"),NoAnnoList(Op("DefaultRelation",[])),Var("aaty'"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Overloading\"")),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("x"))]))])),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[NoAnnoList(Str("\"default\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("c"),NoAnnoList(Op("ParamsAndType",[NoAnnoList(Tuple([Var("s")])),Var("cty")]))]))),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDirectEdge",[Var("ms"),NoAnnoList(Op("P",[])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDistinct",[NoAnnoList(Op("Projection",[NoAnnoList(Str("\"name\""))])),NoAnnoList(Op("Declarations",[Var("ms"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))]))])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Multiple definitions for variable\"")),NoAnnoList(Op("NAME",[]))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CSubsetEq",[NoAnnoList(Op("Lsect",[NoAnnoList(Op("Declarations",[Var("ms"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))]))])),NoAnnoList(Op("Projection",[NoAnnoList(Str("\"name\""))])),NoAnnoList(Op("Reachables",[Var("s"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))]))]))])),NoAnnoList(Op("NoProjection",[])),NoAnnoList(Op("EmptySet",[])),NoAnnoList(Op("Message",[NoAnnoList(Op("Warning",[])),NoAnnoList(Str("\"Variable hides local field\"")),NoAnnoList(Op("NAME",[]))]))])),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-Map1T-rule"))],[NoAnnoList(Str("\"Map1T\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("aa"),NoAnnoList(Op("ParamsAndType",[NoAnnoList(Tuple([Var("ms")])),Var("aaty")]))]))),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-Map1-rule"))],[NoAnnoList(Str("\"Map1\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("vv"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("ms")]))]))]))),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-Map1-rule"))],[NoAnnoList(Str("\"Map1\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("ss"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("ms")]))]))]))),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[NoAnnoList(Str("\"default\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("e"),NoAnnoList(Op("ParamsAndType",[NoAnnoList(Tuple([Var("ms")])),Var("ety")]))]))),NoAnnoList(Op("CConj",[NoAnnoList(Op("CCheckRel",[Var("ety"),NoAnnoList(Op("DefaultRelation",[])),Var("cty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Type mismatch in return expression\"")),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("e"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CNew",[NoAnnoList(List([Var("as")])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))])),NoAnnoList(Op("CNew",[NoAnnoList(List([Var("ms")])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term23"))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term24"),NoAnnoList(Op("Bind",[Var("i"),NoAnnoList(Op("Param",[Var("c"),Var("x")]))]))),Var("args8")])),Var("constraint5"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id)),WithClause(LChoice(Assign(NoAnnoList(Op("ParamsAndType",[As(Var("params17"),NoAnnoList(Tuple([Var("s")]))),Var("type8")])),Var("args8")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s) : type8\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args8")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Bind(i, Param(c, x))\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term24")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term24")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params17")),NoAnnoList(Str("\" : \"")),App(CallNoArgs(SVar("pp-NaBL2-objlangterm")),Var("type8")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint5"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CEqual",[Var("type8"),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term24"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term24")),NoAnnoList(Op("Type",[])),Var("type8")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term24")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s")]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDecl",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term24"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Property",[NoAnnoList(Str("\"origin\""))])),NoAnnoList(Op("Param",[])),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term24"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Property",[NoAnnoList(Str("\"index\""))])),Var("i"),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term24"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Type",[])),Var("ty"),NoAnnoList(Str("\"!\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term24"))]))])),App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[NoAnnoList(Str("\"default\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("c"),NoAnnoList(Op("ParamsAndType",[NoAnnoList(Tuple([Var("s")])),Var("ty")]))])))]))]))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term25"),NoAnnoList(Op("Bind",[Var("i"),NoAnnoList(Op("Var",[Var("c"),Var("x")]))]))),Var("args9")])),Var("constraint6"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id)),WithClause(LChoice(Assign(NoAnnoList(Op("Params",[As(Var("params18"),NoAnnoList(Tuple([Var("s")])))])),Var("args9")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s)\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args9")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Bind(i, Var(c, x))\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term25")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term25")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params18")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint6"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term25")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s")]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDecl",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term25"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Property",[NoAnnoList(Str("\"origin\""))])),NoAnnoList(Op("Local",[])),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term25"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Property",[NoAnnoList(Str("\"index\""))])),Var("i"),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term25"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Var\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),NoAnnoList(Op("Type",[])),Var("ty"),NoAnnoList(Str("\"!\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term25"))]))])),App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[NoAnnoList(Str("\"default\""))]),NoAnnoList(Tuple([Var("nabl2_source"),Var("c"),NoAnnoList(Op("ParamsAndType",[NoAnnoList(Tuple([Var("s")])),Var("ty")]))])))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term26"),NoAnnoList(Op("Int",[]))),Var("args10")])),Var("constraint7"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id)),WithClause(LChoice(Assign(NoAnnoList(Op("ParamsAndType",[As(Var("params19"),NoAnnoList(Tuple([Var("s")]))),Var("type24")])),Var("args10")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s) : type24\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args10")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Int()\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term26")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term26")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params19")),NoAnnoList(Str("\" : \"")),App(CallNoArgs(SVar("pp-NaBL2-objlangterm")),Var("type24")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint7"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CEqual",[Var("type24"),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term26"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term26")),NoAnnoList(Op("Type",[])),Var("type24")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term26")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s")]))])),NoAnnoList(Op("CEqual",[Var("ty"),NoAnnoList(Op("Int",[])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term26"))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term27"),NoAnnoList(Op("Bool",[]))),Var("args11")])),Var("constraint8"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id)),WithClause(LChoice(Assign(NoAnnoList(Op("ParamsAndType",[As(Var("params20"),NoAnnoList(Tuple([Var("s")]))),Var("type25")])),Var("args11")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s) : type25\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args11")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Bool()\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term27")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term27")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params20")),NoAnnoList(Str("\" : \"")),App(CallNoArgs(SVar("pp-NaBL2-objlangterm")),Var("type25")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint8"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CEqual",[Var("type25"),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term27"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term27")),NoAnnoList(Op("Type",[])),Var("type25")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term27")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s")]))])),NoAnnoList(Op("CEqual",[Var("ty"),NoAnnoList(Op("Bool",[])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term27"))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term28"),NoAnnoList(Op("IntArray",[]))),Var("args12")])),Var("constraint9"),[WithClause(Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id)),WithClause(LChoice(Assign(NoAnnoList(Op("ParamsAndType",[As(Var("params21"),NoAnnoList(Tuple([Var("s")]))),Var("type26")])),Var("args12")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s) : type26\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args12")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"IntArray()\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term28")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term28")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params21")),NoAnnoList(Str("\" : \"")),App(CallNoArgs(SVar("pp-NaBL2-objlangterm")),Var("type26")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint9"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CEqual",[Var("type26"),Var("ty"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term28"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term28")),NoAnnoList(Op("Type",[])),Var("type26")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term28")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s")]))])),NoAnnoList(Op("CEqual",[Var("ty"),NoAnnoList(Op("IntArray",[])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term28"))]))]))]))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[],Rule(NoAnnoList(Tuple([Var("nabl2_source"),As(Var("term29"),NoAnnoList(Op("ClassType",[Var("x")]))),Var("args13")])),Var("constraint10"),[WithClause(Seq(Assign(Var("d_class"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"d_class\"")))),Seq(Assign(Var("ty"),App(CallT(SVar("nabl2--fresh-var"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"ty\"")))),Id))),WithClause(LChoice(Assign(NoAnnoList(Op("ParamsAndType",[As(Var("params22"),NoAnnoList(Tuple([Var("s")]))),Var("type27")])),Var("args13")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s) : type27\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("args13")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"ClassType(x)\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term29")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2--is-debug-collection-enabled")),CallT(SVar("nabl2--collection-info-msg"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("term29")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("params22")),NoAnnoList(Str("\" : \"")),App(CallNoArgs(SVar("pp-NaBL2-objlangterm")),Var("type27")),NoAnnoList(Str("\" ]]\""))])))]))),WithClause(Assign(Var("constraint10"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CEqual",[Var("type27"),NoAnnoList(Op("ClassType",[Var("d_class")])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term29"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term29")),NoAnnoList(Op("Type",[])),Var("type27")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CAstProperty",[App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term29")),NoAnnoList(Op("Params",[])),NoAnnoList(Tuple([Var("s")]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGRef",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("s"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term29"))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CResolve",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--occurrence-index-of")),Var("x"))])),Var("d_class"),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term29"))]))])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDeclProperty",[Var("d_class"),NoAnnoList(Op("Type",[])),Var("ty"),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("term29"))]))])),NoAnnoList(Op("CInequal",[Var("ty"),NoAnnoList(Op("MainType",[])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"Cannot refer to main class\"")),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("x"))]))]))]))]))]))]))]))]))))]))])])
